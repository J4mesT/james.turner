<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portfolio — Smooth Scroll + Custom Cursor</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Playfair Display', serif;
      cursor: none !important;
      overflow: auto;
      scroll-behavior: smooth;
    }

    html::-webkit-scrollbar, body::-webkit-scrollbar { display: none; }
    html { -ms-overflow-style: none; }
    body { scrollbar-width: none; }

    *, *::before, *::after { box-sizing: border-box; cursor: none !important; }

    /* top navigation */
    .site-nav {
      position: fixed;
      top: 18px;
      right: 24px;
      z-index: 10020; /* above the cursor */
      pointer-events: auto; /* ensure links stay clickable */
    }
    .site-nav ul { list-style: none; margin: 0; padding: 0; display:flex; gap:10px; }
    .site-nav a {
      display:inline-block;
      text-decoration:none;
      font-weight:600;
      padding:8px 12px;
      border-radius:8px;
      background: rgba(255,255,255,0.62);
      color: #222;
      backdrop-filter: blur(6px);
      transition: background 180ms, transform 120ms, color 180ms;
    }
    .site-nav a:hover, .site-nav a:focus { transform: translateY(-2px); }
    .site-nav a.active { background:#4285f4; color:#fff; box-shadow: 0 6px 18px rgba(66,133,244,0.16); }

    /* scroll container and sections */
    #scroll-container {
      position: relative;
      width: 100%;
      will-change: transform;
    }
    section {
      min-height: 100vh;
      padding: 60px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
    }
    .hero { background: #f5f5f5; }
    .about { background: #e0e0e0; }
    .projects { background: #ccc; }
    .contact { background: #b3b3b3; }

    .hero h1 { font-size: clamp(36px, 10vw, 120px); font-weight:900; line-height:1.05; margin:0; }

    /* custom cursor */
    .cursor {
      position: fixed;
      top: 0; left: 0;
      width: 25px; height: 25px;
      background: #4285f4;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
      z-index: 10010;
      will-change: transform;
      box-shadow: 0 6px 18px rgba(66,133,244,0.18);
    }

    /* scatter effect */
    .scatter-text { position: relative; display: inline-block; }
    .scatter-text span { display:inline-block; transition: transform 1s cubic-bezier(0.22,1,0.36,1), opacity 0.6s ease; }
    .scatter-text.scattered span { opacity: 0.85; }
  </style>
</head>
<body>
  <!-- Top navigation -->
  <nav class="site-nav" aria-label="Primary">
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#projects">Projects</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>

  <!-- Custom Cursor -->
  <div class="cursor" aria-hidden="true"></div>

  <!-- Smooth Scroll Wrapper -->
  <div id="scroll-container">
    <section id="home" class="hero">
      <h1 class="scatter-text">My Awesome<br>Portfolio</h1>
    </section>

    <section id="about" class="about">
      <h2>About Me</h2>
      <p>Write a little bit about yourself here. This section demonstrates the smooth native scroll linked to the transform animation.</p>
    </section>

    <section id="projects" class="projects">
      <h2>My Projects</h2>
      <p>Describe your work, portfolio projects, links, etc.</p>
    </section>

    <section id="contact" class="contact">
      <h2>Contact Me</h2>
      <p>Email, social links, or a contact form here.</p>
    </section>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    /* ---------------- Custom Cursor ---------------- */
    const cursor = document.querySelector('.cursor');
    let mouseX = 0, mouseY = 0, posX = 0, posY = 0, vX = 0, vY = 0;
    const mass = 0.2, damping = 0.7;
    let cursorHalfW = 12.5, cursorHalfH = 12.5;

    if (cursor) {
      const rect = cursor.getBoundingClientRect();
      cursorHalfW = rect.width / 2;
      cursorHalfH = rect.height / 2;
      window.addEventListener('resize', () => {
        const r = cursor.getBoundingClientRect();
        cursorHalfW = r.width / 2; cursorHalfH = r.height / 2;
      });

      document.addEventListener('mousemove', e => { mouseX = e.clientX; mouseY = e.clientY; });

      (function animateCursor(){
        const ax = (mouseX - posX) * mass;
        const ay = (mouseY - posY) * mass;
        vX = (vX + ax) * damping;
        vY = (vY + ay) * damping;
        posX += vX; posY += vY;

        const speed = Math.hypot(vX, vY);
        const scale = 1 + Math.min(speed / 20, 0.5);
        const angle = Math.atan2(vY, vX) * 180 / Math.PI;

        const cx = posX - cursorHalfW;
        const cy = posY - cursorHalfH;
        cursor.style.transform = `translate(${cx}px, ${cy}px) rotate(${angle}deg) scale(${scale}, ${2 - scale})`;

        requestAnimationFrame(animateCursor);
      })();
    }

    /* ---------------- Elements + Smooth scroll (native) ---------------- */
    const container = document.querySelector('#scroll-container');
    if (!container) {
      console.warn('#scroll-container not found — aborting smooth scroll script.');
      return;
    }

    let scrollTarget = window.scrollY;
    let scrollCurrent = window.scrollY;
    const ease = 0.08;

    window.addEventListener('scroll', () => {
      scrollTarget = window.scrollY;
    }, { passive: true });

    function smoothScroll() {
      scrollCurrent += (scrollTarget - scrollCurrent) * ease;
      if (Math.abs(scrollTarget - scrollCurrent) < 0.01) scrollCurrent = scrollTarget;
      container.style.transform = `translateY(${-scrollCurrent}px)`;
      updateScatter(scrollCurrent);
      requestAnimationFrame(smoothScroll);
    }
    smoothScroll();

    /* ---------------- Scatter effect ---------------- */
    const title = document.querySelector('.scatter-text');
    const hero = document.querySelector('.hero');

    function splitText(el) {
      if (!el) return;
      if (el.querySelector('span')) return;
      const html = el.innerHTML.replace(/<br\s*\/?>/gi, '\n');
      el.innerHTML = '';
      for (let ch of html) {
        if (ch === '\n') { el.appendChild(document.createElement('br')); continue; }
        const span = document.createElement('span');
        span.textContent = (ch === ' ') ? '\u00A0' : ch;
        el.appendChild(span);
      }
    }
    splitText(title);

    let spans = title ? [...title.querySelectorAll('span')] : [];

    function assignRandomTargets() {
      spans = title ? [...title.querySelectorAll('span')] : [];
      spans.forEach(span => {
        span.dataset.tx = ((Math.random() - 0.5) * window.innerWidth).toFixed(1);
        span.dataset.ty = ((Math.random() - 0.5) * window.innerHeight).toFixed(1);
        span.dataset.r  = ((Math.random() - 0.5) * 720).toFixed(1);
        span.style.willChange = 'transform';
        if (!span.style.transition) span.style.transition = 'transform 700ms cubic-bezier(.2,.8,.2,1), opacity 400ms ease';
      });
    }
    assignRandomTargets();
    window.addEventListener('resize', () => setTimeout(assignRandomTargets, 120));

    let scattered = false;
    function updateScatter(scrollY) {
      if (!hero || !title) return;
      const threshold = hero.offsetHeight * 0.3;
      if (scrollY > threshold && !scattered) {
        scattered = true;
        title.classList.add('scattered');
        spans.forEach(span => { span.style.transform = `translate(${span.dataset.tx}px, ${span.dataset.ty}px) rotate(${span.dataset.r}deg)`; span.style.opacity = '0.9'; });
      } else if (scrollY <= threshold && scattered) {
        scattered = false;
        title.classList.remove('scattered');
        spans.forEach(span => { span.style.transform = 'translate(0,0) rotate(0)'; span.style.opacity = ''; });
      }
    }

    // initial sync (if page loads scrolled)
    scrollTarget = window.scrollY;
    scrollCurrent = window.scrollY;
    container.style.transform = `translateY(${-scrollCurrent}px)`;
    updateScatter(scrollCurrent);

    /* ---------------- Nav active link highlighting ---------------- */
    const navLinks = document.querySelectorAll('.site-nav a');
    const sections = document.querySelectorAll('section[id]');
    if (sections.length && navLinks.length) {
      const obs = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const id = entry.target.id;
          const link = document.querySelector(`.site-nav a[href="#${id}"]`);
          if (entry.isIntersecting) {
            navLinks.forEach(l => l.classList.remove('active'));
            if (link) link.classList.add('active');
          }
        });
      }, { root: null, rootMargin: '0px', threshold: 0.55 });
      sections.forEach(s => obs.observe(s));
    }

    // quick sync after keyboard navigation (let browser scroll then read window.scrollY)
    window.addEventListener('keydown', (e) => {
      if (['PageDown','PageUp','ArrowDown','ArrowUp','Home','End'].includes(e.key)) {
        setTimeout(() => { scrollTarget = window.scrollY; }, 60);
      }
    }, { passive: true });

  }); // DOMContentLoaded
  </script>
</body>
</html>
